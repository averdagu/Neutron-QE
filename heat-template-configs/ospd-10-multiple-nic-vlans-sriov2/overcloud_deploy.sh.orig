#!/bin/bash

cat >"$HOME/extra_env.yaml"<<EOF
---
parameter_defaults:
    Debug: true
EOF

openstack overcloud deploy --debug \
--templates \
--environment-file "$HOME/extra_env.yaml" \
--libvirt-type kvm \
--ntp-server clock.redhat.com \
--neutron-network-type vlan \
--neutron-disable-tunneling \
--neutron-bridge-mappings datacentre:br-ex,tenant:br-isolated \
--neutron-network-vlan-ranges datacentre:181:181,tenant:80:80 \
--control-scale 1 \
--control-flavor baremetal \
--compute-scale 1 \
--compute-flavor baremetal \
-e /home/stack/ospd-10-multiple-nic-vlans-sriov2/network/network-environment.yaml \
-e /usr/share/openstack-tripleo-heat-templates/environments/neutron-sriov.yaml \
--log-file overcloud_install.log &> overcloud_install.log
